<!DOCTYPE html>
<html>
<head>
    <title>Video Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .video-container { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        video { width: 100%; max-width: 600px; height: 300px; }
        .info { margin: 10px 0; padding: 10px; background: #f5f5f5; }
    </style>
</head>
<body>
    <h1>Video Test Page</h1>
    
    <div class="video-container">
        <h2>HTML5 Video (Chrome Test)</h2>
        <video controls preload="metadata" playsinline webkit-playsinline>
            <source src="/storage/videos/sample.mp4" type="video/mp4">
            <p>Your browser doesn't support HTML5 video.</p>
        </video>
        <div class="info">
            <strong>Browser:</strong> <span id="browser"></span><br>
            <strong>User Agent:</strong> <span id="userAgent"></span>
        </div>
    </div>

    <script>
        // Определяем браузер
        const isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        const isSafari = /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor);
        const isFirefox = /Firefox/.test(navigator.userAgent);
        
        let browserName = 'Unknown';
        if (isChrome) browserName = 'Chrome';
        else if (isSafari) browserName = 'Safari';
        else if (isFirefox) browserName = 'Firefox';
        
        document.getElementById('browser').textContent = browserName;
        document.getElementById('userAgent').textContent = navigator.userAgent;
        
        // Тестируем видео
        const video = document.querySelector('video');
        
        video.addEventListener('loadstart', () => {
            console.log('Video loading started');
        });
        
        video.addEventListener('loadedmetadata', () => {
            console.log('Video metadata loaded');
            console.log('Duration:', video.duration);
            console.log('Video size:', video.videoWidth + 'x' + video.videoHeight);
        });
        
        video.addEventListener('canplay', () => {
            console.log('Video can play');
        });
        
        video.addEventListener('error', (e) => {
            console.error('Video error:', e);
            console.error('Error code:', video.error?.code);
            console.error('Error message:', video.error?.message);
        });
        
        // Принудительная загрузка
        video.load();
    </script>
</body>
</html>
